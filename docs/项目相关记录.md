# 项目中遇到的相关问题



## 需求

-   [x] 常见附件格式后缀收集 

    pdf，doc，xls，ppt，rar，zip，wps

    TODO 找小婷收集站内视频链接格式

-   [x] 采集历史三年的问题

    默认采集历史三年，客户担心存储浪费，不需要全量数据 不好配置的采集全量

    1.  再用extra保存列表页链接的情况下, 更新调度跑一次应该就能保证全量性不会有太大问题了
    2.  调度中能看到总页码, 大致能估算数据量

-   [x] 主题 关键词 是tag吗， 按数据库字段采集

    

## 审核

-   [x] 审核文档整理

    审核文档分成两块, 每天配置的做自审记录, 汇总的一个做审核记录我和审核更新信息, 减少沟通成本

    因为之前的文档不方便双方查看使用导致配置这边漏掉很多配置没有记录上

-   [x] 优化流程

    与需求和数据审核沟通, 同步这边的最新状况给那边

    配置这边遇到的问题开始复杂, 我在自审和核验中间做排错工作, 既能加快进度, 也方便收集异常数据, 更新模板

    审核部分沟通一下优化进度, 保证之前要求的前提下, 是否可以不用等待历史调度全部完成也可以开始审核

-   [x] 自审记录脚本

    给配置人员提供一个扫描脚本, 可以扫描当天开始执行了更新调度的配置, 生成markdown表格,复制添加到自审文档, 防止漏掉配置, 可以每天要下班之前我来添加, 第二天他们做自审的时候添加问题描述更新状态就可以了
    
-   [ ] 合并部分的前两个省

    还需要一天整理完成, 并排错完成一同交付给审核

    合并进度 8/22

    重跑排错进度 3/22

-   [ ] 第二周的前两天的配置

    在第三天合并排错完成后整理文档排错

## 负责人

-   [x] 日报生成

    审核过程中可完成

-   [ ] 

## 配置小团队

-   [ ] 培训阶段

    每个人成长速度不一样, 有快又慢, 有来得晚的, 可能会有压力

    第一周过去, 有三个人配置比较可以的, 剩下两个我带一带

-   [ ] 日报自动生成

    复制表格到confluence的自审文档中，适当编辑即可做数据自审来用了

    TODO: 需要一个模版，为额外海松定制一个格式化的输出

-   [ ] 



## 技术

-   [ ] 全局去重的范围 即作用域 方式 上线后是否应该开启

-   [x] 数据库唯一索引

    content_md5, batch_date组合唯一索引

    content_md5最终确定为网站名 发布时间 标题 内容详情4个字段做字符串链接后计算md5

-   [ ] 点击量采集, 需要浏览器下载, 测试总失败, 有的点击量的请求复杂

-   [ ] confluence在非编辑模式下勾选check box多了会保存不了

    暂时在编辑模式下勾选

-   [ ] 监控的实现

-   [ ] 非配置导致的日志报错内容

    ```
    2020-07-12 17:08:52|crawl.fetch_event|10771|10773|save_stage.py|232 [save] save timedelta error, Invalid input of type: 'list'. Convert to a byte, string or number first.
    2020-07-12 17:08:52|crawl.fetch_event|10771|10773|context.py|129 [save] save timedelta error, Invalid input of type: 'list'. Convert to a byte, string or number first.
    ```

-   [x] 行处理器参数data中的空字符串会变成None, 卡了好久搞懂了, 还清晰了字典的get方法, 模板已更新处理字段None值

-   [x] 上面的bug提交给负责人, 找到了bug的原因, 可以放心上线了

-   [ ] 

## 个人

-   [x] 第二天 我休息一天 嗓子要坏 效果不好
    5个人之间互助, 我旁观了解大家
    
-   [ ] 第四天左右开始提的问题开始复杂了占用时间较多, 尝试解决

    配置人员处理调度进度到80%，或者感觉到处理有压力就我来接手解决

    半个月到一个月他们熟悉系统后接手的调度进度可适当提高优化了，初期排错过程中浪费的时间

-   [ ] 第二周, 边整理以前的配置, 边给配置人员解决问题

    第一天来看, 问题明显减少, 都是具体的, 第一周提醒过的问题, 提一下基本就解决了. 配置上还有一点小小的风格问题, 已经影响不大了, 反馈给我的处理器脚本模板和验证器的升级效果也很好.

-   [ ] 



